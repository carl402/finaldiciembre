<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monte Carlo - Sistema de Simulaci贸n</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
</head>
<body>
    <div id="root"></div>
    
    <script>
        const { useState, useEffect } = React;
        
        function App() {
            const [currentPage, setCurrentPage] = useState('login');
            const [user, setUser] = useState(null);
            const [loginData, setLoginData] = useState({email: '', password: ''});
            const [loginError, setLoginError] = useState('');
            
            const [projects, setProjects] = useState([]);
            const [users, setUsers] = useState([
                {id: 1, firstName: 'Admin', lastName: 'User', email: 'admin@montecarlo.com', role: 'admin'},
                {id: 2, firstName: 'Analyst', lastName: 'User', email: 'analyst@montecarlo.com', role: 'analyst'}
            ]);
            const [reports, setReports] = useState([]);
            const [newProject, setNewProject] = useState({name: '', description: '', status: 'active'});
            const [selectedProject, setSelectedProject] = useState(null);
            const [projectVariables, setProjectVariables] = useState([]);
            const [newVariable, setNewVariable] = useState({name: '', type: 'continua', distribution: 'normal', parameters: {}});
            const [simulationConfig, setSimulationConfig] = useState({iterations: 1000, randomSeed: null});
            const [newUser, setNewUser] = useState({firstName: '', lastName: '', email: '', password: '', role: 'analyst'});
            const [editingUser, setEditingUser] = useState(null);
            const [searchProject, setSearchProject] = useState('');
            const [searchDate, setSearchDate] = useState('');
            const [viewingReport, setViewingReport] = useState(null);
            
            // Funci贸n para ejecutar simulaci贸n Monte Carlo
            const executeMonteCarloSimulation = (variables, config) => {
                const scenarios = [];
                const results = [];
                
                for (let i = 0; i < config.iterations; i++) {
                    const scenario = { iteration: i + 1, values: {} };
                    let result = 0;
                    
                    variables.forEach(variable => {
                        let value;
                        switch (variable.distribution) {
                            case 'normal':
                                value = normalRandom(50, 15);
                                break;
                            case 'uniforme':
                                value = Math.random() * 100;
                                break;
                            case 'triangular':
                                value = triangularRandom(10, 50, 90);
                                break;
                            default:
                                value = Math.random() * 100;
                        }
                        scenario.values[variable.name] = value;
                        result += value;
                    });
                    
                    scenario.result = result;
                    scenarios.push(scenario);
                    results.push(result);
                }
                
                const average = results.reduce((a, b) => a + b, 0) / results.length;
                const variance = results.reduce((a, b) => a + Math.pow(b - average, 2), 0) / results.length;
                const stdDev = Math.sqrt(variance);
                const sorted = results.sort((a, b) => a - b);
                const p50 = sorted[Math.floor(sorted.length * 0.5)];
                const p90 = sorted[Math.floor(sorted.length * 0.9)];
                
                return {
                    scenarios,
                    results,
                    metrics: { average, stdDev, variance, p50, p90, min: Math.min(...results), max: Math.max(...results) }
                };
            };
            
            const normalRandom = (mean, stdDev) => {
                const u1 = Math.random();
                const u2 = Math.random();
                const z0 = Math.sqrt(-2 * Math.log(u1)) * Math.cos(2 * Math.PI * u2);
                return z0 * stdDev + mean;
            };
            
            const triangularRandom = (min, mode, max) => {
                const u = Math.random();
                const f = (mode - min) / (max - min);
                if (u < f) {
                    return min + Math.sqrt(u * (max - min) * (mode - min));
                } else {
                    return max - Math.sqrt((1 - u) * (max - min) * (max - mode));
                }
            };
            
            const generateCharts = (simulationResults) => {
                const { results, metrics } = simulationResults;
                const bins = 10;
                const binSize = (metrics.max - metrics.min) / bins;
                const histogram = Array(bins).fill(0);
                
                results.forEach(value => {
                    const binIndex = Math.min(Math.floor((value - metrics.min) / binSize), bins - 1);
                    histogram[binIndex]++;
                });
                
                return {
                    histogram: {
                        bins: histogram,
                        labels: Array(bins).fill(0).map((_, i) => `${(metrics.min + i * binSize).toFixed(1)}-${(metrics.min + (i + 1) * binSize).toFixed(1)}`)
                    }
                };
            };
            
            const viewReport = (report) => {
                setViewingReport(report);
            };
            
            const downloadReport = (report, format) => {
                const content = generateReportContent(report, format);
                const blob = new Blob([content], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `${report.name}.${format}`;
                a.click();
                URL.revokeObjectURL(url);
            };
            
            const generateReportContent = (report, format) => {
                const { project, date, variables, config, results, charts } = report;
                
                return `REPORTE DE SIMULACIN MONTE CARLO\n\n` +
                    `Proyecto: ${project}\n` +
                    `Fecha: ${date}\n` +
                    `Iteraciones: ${config.iterations}\n\n` +
                    `VARIABLES CONFIGURADAS:\n` +
                    variables.map(v => `- ${v.name}: ${v.type} (${v.distribution})`).join('\n') + '\n\n' +
                    `RESULTADOS:\n` +
                    `- Promedio: ${results.metrics.average.toFixed(2)}\n` +
                    `- Desviaci贸n Est谩ndar: ${results.metrics.stdDev.toFixed(2)}\n` +
                    `- M铆nimo: ${results.metrics.min.toFixed(2)}\n` +
                    `- M谩ximo: ${results.metrics.max.toFixed(2)}\n` +
                    `- Percentil 50: ${results.metrics.p50.toFixed(2)}\n` +
                    `- Percentil 90: ${results.metrics.p90.toFixed(2)}\n\n` +
                    `HISTOGRAMA:\n` +
                    charts.histogram.labels.map((label, i) => `${label}: ${charts.histogram.bins[i]} casos`).join('\n');
            };
            
            const handleLogin = async () => {
                try {
                    if (loginData.email === 'admin@montecarlo.com' && loginData.password === 'admin123') {
                        setUser({id: 1, email: 'admin@montecarlo.com', firstName: 'Admin', role: 'admin'});
                        setCurrentPage('reportes');
                        setLoginError('');
                    } else if (loginData.email === 'analyst@montecarlo.com' && loginData.password === 'analyst123') {
                        setUser({id: 2, email: 'analyst@montecarlo.com', firstName: 'Analyst', role: 'analyst'});
                        setCurrentPage('reportes');
                        setLoginError('');
                    } else {
                        setLoginError('Credenciales inv谩lidas');
                    }
                } catch (error) {
                    setLoginError('Error de conexi贸n');
                }
            };
            
            const LoginPage = () => (
                React.createElement('div', { className: 'min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4' },
                    React.createElement('div', { className: 'bg-white rounded-xl shadow-2xl p-8 w-full max-w-md' },
                        React.createElement('div', { className: 'text-center mb-8' },
                            React.createElement('h1', { className: 'text-3xl font-bold text-gray-800 mb-2' }, ' Monte Carlo'),
                            React.createElement('p', { className: 'text-gray-600' }, 'Sistema de Simulaci贸n'),
                            React.createElement('div', { className: 'mt-4 text-sm text-gray-500' },
                                React.createElement('p', null, 'Demo: admin@montecarlo.com / admin123'),
                                React.createElement('p', null, 'Demo: analyst@montecarlo.com / analyst123')
                            )
                        ),
                        loginError && React.createElement('div', { className: 'bg-red-100 text-red-700 p-3 rounded mb-4' }, loginError),
                        React.createElement('div', { className: 'space-y-4' },
                            React.createElement('input', {
                                type: 'email',
                                placeholder: 'Email',
                                value: loginData.email,
                                onChange: (e) => setLoginData({...loginData, email: e.target.value}),
                                className: 'w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500'
                            }),
                            React.createElement('input', {
                                type: 'password',
                                placeholder: 'Contrase帽a',
                                value: loginData.password,
                                onChange: (e) => setLoginData({...loginData, password: e.target.value}),
                                className: 'w-full p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500'
                            }),
                            React.createElement('button', {
                                onClick: handleLogin,
                                className: 'w-full bg-blue-600 text-white p-4 rounded-lg hover:bg-blue-700 font-semibold'
                            }, 'Iniciar Sesi贸n')
                        )
                    )
                )
            );
            
            const Sidebar = () => (
                React.createElement('div', { className: 'w-64 bg-white shadow-lg h-full' },
                    React.createElement('div', { className: 'p-6 border-b' },
                        React.createElement('h2', { className: 'text-xl font-bold text-gray-800' }, ' Monte Carlo'),
                        React.createElement('p', { className: 'text-sm text-gray-600' }, `Bienvenido, ${user?.firstName}`)
                    ),
                    React.createElement('nav', { className: 'p-4 space-y-2' },
                        ['reportes', 'proyectos', 'users', 'settings'].map(page => 
                            React.createElement('button', {
                                key: page,
                                onClick: () => setCurrentPage(page),
                                className: `w-full text-left p-3 rounded-lg ${currentPage === page ? 'bg-blue-100 text-blue-700' : 'hover:bg-gray-100'}`
                            }, 
                            page === 'reportes' ? ' Reportes' :
                            page === 'proyectos' ? ' Proyectos' :
                            page === 'users' ? ' Usuarios' : '锔 Configuraci贸n')
                        )
                    )
                )
            );
            
            if (currentPage === 'login') {
                return React.createElement(LoginPage);
            }
            
            return React.createElement('div', { className: 'flex h-screen bg-gray-50' },
                React.createElement(Sidebar),
                React.createElement('div', { className: 'flex-1 p-6 overflow-auto' },
                    currentPage === 'reportes' && React.createElement('div', null,
                        React.createElement('h1', { className: 'text-3xl font-bold mb-6' }, 'Reportes Generados'),
                        React.createElement('div', { className: 'bg-white p-6 rounded-xl shadow mb-6' },
                            React.createElement('div', { className: 'grid grid-cols-3 gap-4 mb-4' },
                                React.createElement('input', {
                                    type: 'text',
                                    placeholder: 'Buscar por proyecto',
                                    value: searchProject,
                                    onChange: (e) => setSearchProject(e.target.value),
                                    className: 'p-2 border rounded'
                                }),
                                React.createElement('input', {
                                    type: 'date',
                                    value: searchDate,
                                    onChange: (e) => setSearchDate(e.target.value),
                                    className: 'p-2 border rounded'
                                }),
                                React.createElement('button', {
                                    className: 'bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700'
                                }, 'Buscar')
                            )
                        ),
                        React.createElement('div', { className: 'bg-white rounded-xl shadow' },
                            React.createElement('table', { className: 'w-full' },
                                React.createElement('thead', { className: 'bg-gray-50' },
                                    React.createElement('tr', null,
                                        React.createElement('th', { className: 'p-4 text-left' }, 'Proyecto'),
                                        React.createElement('th', { className: 'p-4 text-left' }, 'Fecha'),
                                        React.createElement('th', { className: 'p-4 text-left' }, 'Nombre'),
                                        React.createElement('th', { className: 'p-4 text-left' }, 'Acciones')
                                    )
                                ),
                                React.createElement('tbody', null,
                                    reports.map(report => 
                                        React.createElement('tr', { key: report.id, className: 'border-t' },
                                            React.createElement('td', { className: 'p-4' }, report.project),
                                            React.createElement('td', { className: 'p-4' }, report.date),
                                            React.createElement('td', { className: 'p-4' }, report.name),
                                            React.createElement('td', { className: 'p-4 space-x-2' },
                                                React.createElement('button', {
                                                    onClick: () => downloadReport(report, 'pdf'),
                                                    className: 'bg-green-600 text-white px-3 py-1 rounded text-sm'
                                                }, 'PDF'),
                                                React.createElement('button', {
                                                    onClick: () => downloadReport(report, 'doc'),
                                                    className: 'bg-blue-600 text-white px-3 py-1 rounded text-sm'
                                                }, 'DOC'),
                                                React.createElement('button', {
                                                    onClick: () => viewReport(report),
                                                    className: 'bg-purple-600 text-white px-3 py-1 rounded text-sm'
                                                }, 'Ver')
                                            )
                                        )
                                    )
                                )
                            )
                        ),
                        
                        // Modal para ver reporte detallado
                        viewingReport && React.createElement('div', { className: 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4' },
                            React.createElement('div', { className: 'bg-white rounded-xl p-6 w-full max-w-6xl max-h-screen overflow-auto' },
                                React.createElement('div', { className: 'flex justify-between items-center mb-6' },
                                    React.createElement('h2', { className: 'text-2xl font-bold' }, viewingReport.name),
                                    React.createElement('button', {
                                        onClick: () => setViewingReport(null),
                                        className: 'text-gray-500 hover:text-gray-700 text-2xl'
                                    }, '')
                                ),
                                
                                React.createElement('div', { className: 'grid grid-cols-2 gap-6' },
                                    React.createElement('div', { className: 'bg-gray-50 p-4 rounded' },
                                        React.createElement('h3', { className: 'font-semibold mb-3' }, 'Informaci贸n del Proyecto'),
                                        React.createElement('p', null, `Proyecto: ${viewingReport.project}`),
                                        React.createElement('p', null, `Fecha: ${viewingReport.date}`),
                                        React.createElement('p', null, `Iteraciones: ${viewingReport.config.iterations}`),
                                        React.createElement('p', null, `Variables: ${viewingReport.variables.length}`)
                                    ),
                                    
                                    React.createElement('div', { className: 'bg-blue-50 p-4 rounded' },
                                        React.createElement('h3', { className: 'font-semibold mb-3' }, 'M茅tricas Principales'),
                                        React.createElement('p', null, `Promedio: ${viewingReport.results.metrics.average.toFixed(2)}`),
                                        React.createElement('p', null, `Desviaci贸n: ${viewingReport.results.metrics.stdDev.toFixed(2)}`),
                                        React.createElement('p', null, `M铆nimo: ${viewingReport.results.metrics.min.toFixed(2)}`),
                                        React.createElement('p', null, `M谩ximo: ${viewingReport.results.metrics.max.toFixed(2)}`)
                                    )
                                ),
                                
                                React.createElement('div', { className: 'mt-6' },
                                    React.createElement('h3', { className: 'font-semibold mb-3' }, 'Variables Configuradas'),
                                    React.createElement('div', { className: 'grid grid-cols-3 gap-4' },
                                        viewingReport.variables.map(variable => 
                                            React.createElement('div', { key: variable.id, className: 'border p-3 rounded' },
                                                React.createElement('p', { className: 'font-medium' }, variable.name),
                                                React.createElement('p', { className: 'text-sm text-gray-600' }, `${variable.type} - ${variable.distribution}`)
                                            )
                                        )
                                    )
                                ),
                                
                                React.createElement('div', { className: 'mt-6' },
                                    React.createElement('h3', { className: 'font-semibold mb-3' }, 'Distribuci贸n de Resultados (Histograma)'),
                                    React.createElement('div', { className: 'bg-gray-50 p-4 rounded' },
                                        React.createElement('div', { className: 'flex items-end space-x-1 h-40' },
                                            viewingReport.charts.histogram.bins.map((count, i) => {
                                                const maxCount = Math.max(...viewingReport.charts.histogram.bins);
                                                const height = (count / maxCount) * 100;
                                                return React.createElement('div', {
                                                    key: i,
                                                    className: 'bg-blue-500 flex-1 flex items-end justify-center text-white text-xs',
                                                    style: { height: `${height}%`, minHeight: '20px' },
                                                    title: `${viewingReport.charts.histogram.labels[i]}: ${count} casos`
                                                }, count);
                                            })
                                        )
                                    )
                                ),
                                
                                React.createElement('div', { className: 'mt-6' },
                                    React.createElement('h3', { className: 'font-semibold mb-3' }, 'Percentiles'),
                                    React.createElement('div', { className: 'grid grid-cols-2 gap-4' },
                                        React.createElement('div', { className: 'bg-green-50 p-4 rounded text-center' },
                                            React.createElement('p', { className: 'text-2xl font-bold text-green-700' }, viewingReport.results.metrics.p50.toFixed(2)),
                                            React.createElement('p', { className: 'text-sm text-gray-600' }, 'Percentil 50 (Mediana)')
                                        ),
                                        React.createElement('div', { className: 'bg-orange-50 p-4 rounded text-center' },
                                            React.createElement('p', { className: 'text-2xl font-bold text-orange-700' }, viewingReport.results.metrics.p90.toFixed(2)),
                                            React.createElement('p', { className: 'text-sm text-gray-600' }, 'Percentil 90')
                                        )
                                    )
                                ),
                                
                                React.createElement('div', { className: 'mt-6 flex gap-4' },
                                    React.createElement('button', {
                                        onClick: () => downloadReport(viewingReport, 'pdf'),
                                        className: 'bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700'
                                    }, 'Descargar PDF'),
                                    React.createElement('button', {
                                        onClick: () => downloadReport(viewingReport, 'doc'),
                                        className: 'bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700'
                                    }, 'Descargar DOC'),
                                    React.createElement('button', {
                                        onClick: () => setViewingReport(null),
                                        className: 'bg-gray-600 text-white px-6 py-2 rounded hover:bg-gray-700'
                                    }, 'Cerrar')
                                )
                            )
                        )
                    ),
                    currentPage === 'proyectos' && React.createElement('div', null,
                        React.createElement('h1', { className: 'text-3xl font-bold mb-6' }, 'Gesti贸n de Proyectos Monte Carlo'),
                        
                        React.createElement('div', { className: 'bg-white p-6 rounded-xl shadow mb-6' },
                            React.createElement('h3', { className: 'text-lg font-semibold mb-4' }, 'Crear Nuevo Proyecto'),
                            React.createElement('div', { className: 'grid grid-cols-3 gap-4 mb-4' },
                                React.createElement('input', {
                                    type: 'text',
                                    placeholder: 'Nombre del proyecto',
                                    value: newProject.name,
                                    onChange: (e) => setNewProject({...newProject, name: e.target.value}),
                                    className: 'p-2 border rounded'
                                }),
                                React.createElement('input', {
                                    type: 'text',
                                    placeholder: 'Descripci贸n',
                                    value: newProject.description,
                                    onChange: (e) => setNewProject({...newProject, description: e.target.value}),
                                    className: 'p-2 border rounded'
                                }),
                                React.createElement('select', {
                                    value: newProject.status,
                                    onChange: (e) => setNewProject({...newProject, status: e.target.value}),
                                    className: 'p-2 border rounded'
                                },
                                    React.createElement('option', { value: 'active' }, 'Activo'),
                                    React.createElement('option', { value: 'inactive' }, 'Inactivo')
                                )
                            ),
                            React.createElement('button', {
                                onClick: () => {
                                    if (newProject.name) {
                                        setProjects([...projects, {...newProject, id: Date.now(), responsibleUser: user?.id}]);
                                        setNewProject({name: '', description: '', status: 'active'});
                                    }
                                },
                                className: 'bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700'
                            }, 'Crear Proyecto')
                        ),
                        
                        React.createElement('div', { className: 'bg-white rounded-xl shadow' },
                            React.createElement('div', { className: 'p-4 border-b' },
                                React.createElement('input', {
                                    type: 'text',
                                    placeholder: 'Buscar proyectos...',
                                    value: searchProject,
                                    onChange: (e) => setSearchProject(e.target.value),
                                    className: 'w-full p-2 border rounded'
                                })
                            ),
                            React.createElement('table', { className: 'w-full' },
                                React.createElement('thead', { className: 'bg-gray-50' },
                                    React.createElement('tr', null,
                                        React.createElement('th', { className: 'p-4 text-left' }, 'Nombre'),
                                        React.createElement('th', { className: 'p-4 text-left' }, 'Descripci贸n'),
                                        React.createElement('th', { className: 'p-4 text-left' }, 'Estado'),
                                        React.createElement('th', { className: 'p-4 text-left' }, 'Variables'),
                                        React.createElement('th', { className: 'p-4 text-left' }, 'Acciones')
                                    )
                                ),
                                React.createElement('tbody', null,
                                    projects.filter(p => p.name.toLowerCase().includes(searchProject.toLowerCase())).map(project => 
                                        React.createElement('tr', { key: project.id, className: 'border-t' },
                                            React.createElement('td', { className: 'p-4 font-semibold' }, project.name),
                                            React.createElement('td', { className: 'p-4' }, project.description || 'Sin descripci贸n'),
                                            React.createElement('td', { className: 'p-4' },
                                                React.createElement('span', {
                                                    className: `px-2 py-1 rounded text-sm ${project.status === 'active' ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}`
                                                }, project.status === 'active' ? 'Activo' : 'Inactivo')
                                            ),
                                            React.createElement('td', { className: 'p-4' }, '0 variables'),
                                            React.createElement('td', { className: 'p-4 space-x-2' },
                                                React.createElement('button', {
                                                    onClick: () => setSelectedProject(project),
                                                    className: 'bg-blue-600 text-white px-3 py-1 rounded text-sm'
                                                }, 'Configurar'),
                                                React.createElement('button', {
                                                    onClick: () => setProjects(projects.filter(p => p.id !== project.id)),
                                                    className: 'bg-red-600 text-white px-3 py-1 rounded text-sm'
                                                }, 'Eliminar')
                                            )
                                        )
                                    )
                                )
                            )
                        ),
                        
                        selectedProject && React.createElement('div', { className: 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4' },
                            React.createElement('div', { className: 'bg-white rounded-xl p-6 w-full max-w-4xl max-h-screen overflow-auto' },
                                React.createElement('div', { className: 'flex justify-between items-center mb-6' },
                                    React.createElement('h2', { className: 'text-2xl font-bold' }, `Configurar: ${selectedProject.name}`),
                                    React.createElement('button', {
                                        onClick: () => setSelectedProject(null),
                                        className: 'text-gray-500 hover:text-gray-700 text-2xl'
                                    }, '')
                                ),
                                
                                React.createElement('div', { className: 'mb-6' },
                                    React.createElement('h3', { className: 'text-lg font-semibold mb-4' }, 'Variables del Proyecto'),
                                    React.createElement('div', { className: 'grid grid-cols-4 gap-4 mb-4' },
                                        React.createElement('input', {
                                            type: 'text',
                                            placeholder: 'Nombre variable',
                                            value: newVariable.name,
                                            onChange: (e) => setNewVariable({...newVariable, name: e.target.value}),
                                            className: 'p-2 border rounded'
                                        }),
                                        React.createElement('select', {
                                            value: newVariable.type,
                                            onChange: (e) => setNewVariable({...newVariable, type: e.target.value}),
                                            className: 'p-2 border rounded'
                                        },
                                            React.createElement('option', { value: 'continua' }, 'Continua'),
                                            React.createElement('option', { value: 'discreta' }, 'Discreta')
                                        ),
                                        React.createElement('select', {
                                            value: newVariable.distribution,
                                            onChange: (e) => setNewVariable({...newVariable, distribution: e.target.value}),
                                            className: 'p-2 border rounded'
                                        },
                                            React.createElement('option', { value: 'normal' }, 'Normal'),
                                            React.createElement('option', { value: 'uniforme' }, 'Uniforme'),
                                            React.createElement('option', { value: 'triangular' }, 'Triangular')
                                        ),
                                        React.createElement('button', {
                                            onClick: () => {
                                                if (newVariable.name) {
                                                    setProjectVariables([...projectVariables, {...newVariable, id: Date.now()}]);
                                                    setNewVariable({name: '', type: 'continua', distribution: 'normal', parameters: {}});
                                                }
                                            },
                                            className: 'bg-green-600 text-white px-4 py-2 rounded'
                                        }, 'Agregar')
                                    ),
                                    
                                    projectVariables.length > 0 && React.createElement('div', { className: 'border rounded' },
                                        React.createElement('table', { className: 'w-full' },
                                            React.createElement('thead', { className: 'bg-gray-50' },
                                                React.createElement('tr', null,
                                                    React.createElement('th', { className: 'p-2 text-left' }, 'Variable'),
                                                    React.createElement('th', { className: 'p-2 text-left' }, 'Tipo'),
                                                    React.createElement('th', { className: 'p-2 text-left' }, 'Distribuci贸n'),
                                                    React.createElement('th', { className: 'p-2 text-left' }, 'Acciones')
                                                )
                                            ),
                                            React.createElement('tbody', null,
                                                projectVariables.map(variable => 
                                                    React.createElement('tr', { key: variable.id, className: 'border-t' },
                                                        React.createElement('td', { className: 'p-2' }, variable.name),
                                                        React.createElement('td', { className: 'p-2' }, variable.type),
                                                        React.createElement('td', { className: 'p-2' }, variable.distribution),
                                                        React.createElement('td', { className: 'p-2' },
                                                            React.createElement('button', {
                                                                onClick: () => setProjectVariables(projectVariables.filter(v => v.id !== variable.id)),
                                                                className: 'bg-red-600 text-white px-2 py-1 rounded text-sm'
                                                            }, 'Eliminar')
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                    )
                                ),
                                
                                React.createElement('div', { className: 'mb-6' },
                                    React.createElement('h3', { className: 'text-lg font-semibold mb-4' }, 'Configuraci贸n de Simulaci贸n'),
                                    React.createElement('div', { className: 'grid grid-cols-2 gap-4' },
                                        React.createElement('div', null,
                                            React.createElement('label', { className: 'block text-sm font-medium mb-2' }, 'N煤mero de Iteraciones'),
                                            React.createElement('input', {
                                                type: 'number',
                                                value: simulationConfig.iterations,
                                                onChange: (e) => setSimulationConfig({...simulationConfig, iterations: parseInt(e.target.value)}),
                                                className: 'w-full p-2 border rounded'
                                            })
                                        ),
                                        React.createElement('div', null,
                                            React.createElement('label', { className: 'block text-sm font-medium mb-2' }, 'Semilla Aleatoria (opcional)'),
                                            React.createElement('input', {
                                                type: 'number',
                                                value: simulationConfig.randomSeed || '',
                                                onChange: (e) => setSimulationConfig({...simulationConfig, randomSeed: e.target.value ? parseInt(e.target.value) : null}),
                                                className: 'w-full p-2 border rounded'
                                            })
                                        )
                                    )
                                ),
                                
                                React.createElement('div', { className: 'flex gap-4' },
                                    React.createElement('button', {
                                        onClick: () => {
                                            if (projectVariables.length > 0) {
                                                const results = executeMonteCarloSimulation(projectVariables, simulationConfig);
                                                
                                                const report = {
                                                    id: Date.now(),
                                                    project: selectedProject.name,
                                                    date: new Date().toISOString().split('T')[0],
                                                    name: `Reporte ${selectedProject.name} - ${new Date().toLocaleDateString()}`,
                                                    variables: projectVariables,
                                                    config: simulationConfig,
                                                    results: results,
                                                    charts: generateCharts(results)
                                                };
                                                
                                                setReports([...reports, report]);
                                                
                                                alert(`Simulaci贸n completada:\n- ${results.scenarios.length} escenarios generados\n- Promedio: ${results.metrics.average.toFixed(2)}\n- Desviaci贸n: ${results.metrics.stdDev.toFixed(2)}\n\nReporte guardado en la secci贸n Reportes`);
                                                setSelectedProject(null);
                                                setProjectVariables([]);
                                            } else {
                                                alert('Debe agregar al menos una variable para ejecutar la simulaci贸n');
                                            }
                                        },
                                        className: 'bg-green-600 text-white px-6 py-2 rounded hover:bg-green-700'
                                    }, 'Ejecutar Simulaci贸n'),
                                    React.createElement('button', {
                                        onClick: () => setSelectedProject(null),
                                        className: 'bg-gray-600 text-white px-6 py-2 rounded hover:bg-gray-700'
                                    }, 'Cerrar')
                                )
                            )
                        )
                    ),
                    currentPage === 'users' && React.createElement('div', null,
                        React.createElement('h1', { className: 'text-3xl font-bold mb-6' }, 'Usuarios'),
                        React.createElement('div', { className: 'bg-white rounded-xl shadow mb-6' },
                            React.createElement('table', { className: 'w-full' },
                                React.createElement('thead', { className: 'bg-gray-50' },
                                    React.createElement('tr', null,
                                        React.createElement('th', { className: 'p-4 text-left' }, 'Nombre'),
                                        React.createElement('th', { className: 'p-4 text-left' }, 'Email'),
                                        React.createElement('th', { className: 'p-4 text-left' }, 'Rol'),
                                        React.createElement('th', { className: 'p-4 text-left' }, 'Acciones')
                                    )
                                ),
                                React.createElement('tbody', null,
                                    users.map(user => 
                                        React.createElement('tr', { key: user.id, className: 'border-t' },
                                            React.createElement('td', { className: 'p-4' }, `${user.firstName} ${user.lastName}`),
                                            React.createElement('td', { className: 'p-4' }, user.email),
                                            React.createElement('td', { className: 'p-4' }, user.role),
                                            React.createElement('td', { className: 'p-4 space-x-2' },
                                                React.createElement('button', {
                                                    onClick: () => setEditingUser(user),
                                                    className: 'bg-blue-600 text-white px-3 py-1 rounded text-sm'
                                                }, 'Editar'),
                                                React.createElement('button', {
                                                    onClick: () => setUsers(users.filter(u => u.id !== user.id)),
                                                    className: 'bg-red-600 text-white px-3 py-1 rounded text-sm'
                                                }, 'Eliminar')
                                            )
                                        )
                                    )
                                )
                            )
                        ),
                        React.createElement('div', { className: 'bg-white p-6 rounded-xl shadow' },
                            React.createElement('h3', { className: 'text-lg font-semibold mb-4' }, editingUser ? 'Editar Usuario' : 'Crear Usuario'),
                            React.createElement('div', { className: 'grid grid-cols-2 gap-4 mb-4' },
                                React.createElement('input', {
                                    type: 'text',
                                    placeholder: 'Nombre',
                                    value: editingUser ? editingUser.firstName : newUser.firstName,
                                    onChange: (e) => editingUser ? setEditingUser({...editingUser, firstName: e.target.value}) : setNewUser({...newUser, firstName: e.target.value}),
                                    className: 'p-2 border rounded'
                                }),
                                React.createElement('input', {
                                    type: 'text',
                                    placeholder: 'Apellido',
                                    value: editingUser ? editingUser.lastName : newUser.lastName,
                                    onChange: (e) => editingUser ? setEditingUser({...editingUser, lastName: e.target.value}) : setNewUser({...newUser, lastName: e.target.value}),
                                    className: 'p-2 border rounded'
                                })
                            ),
                            React.createElement('div', { className: 'grid grid-cols-3 gap-4 mb-4' },
                                React.createElement('input', {
                                    type: 'email',
                                    placeholder: 'Email',
                                    value: editingUser ? editingUser.email : newUser.email,
                                    onChange: (e) => editingUser ? setEditingUser({...editingUser, email: e.target.value}) : setNewUser({...newUser, email: e.target.value}),
                                    className: 'p-2 border rounded'
                                }),
                                !editingUser && React.createElement('input', {
                                    type: 'password',
                                    placeholder: 'Contrase帽a',
                                    value: newUser.password,
                                    onChange: (e) => setNewUser({...newUser, password: e.target.value}),
                                    className: 'p-2 border rounded'
                                }),
                                React.createElement('select', {
                                    value: editingUser ? editingUser.role : newUser.role,
                                    onChange: (e) => editingUser ? setEditingUser({...editingUser, role: e.target.value}) : setNewUser({...newUser, role: e.target.value}),
                                    className: 'p-2 border rounded'
                                },
                                    React.createElement('option', { value: 'analyst' }, 'Analista'),
                                    React.createElement('option', { value: 'admin' }, 'Administrador')
                                )
                            ),
                            React.createElement('div', { className: 'flex gap-2' },
                                React.createElement('button', {
                                    onClick: () => {
                                        if (editingUser) {
                                            setUsers(users.map(u => u.id === editingUser.id ? editingUser : u));
                                            setEditingUser(null);
                                        } else {
                                            if (newUser.firstName && newUser.email && newUser.password) {
                                                setUsers([...users, {...newUser, id: Date.now()}]);
                                                setNewUser({firstName: '', lastName: '', email: '', password: '', role: 'analyst'});
                                            }
                                        }
                                    },
                                    className: 'bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700'
                                }, editingUser ? 'Actualizar' : 'Crear'),
                                editingUser && React.createElement('button', {
                                    onClick: () => setEditingUser(null),
                                    className: 'bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700'
                                }, 'Cancelar')
                            )
                        )
                    ),
                    currentPage === 'settings' && React.createElement('div', null,
                        React.createElement('h1', { className: 'text-3xl font-bold mb-6' }, 'Configuraci贸n'),
                        React.createElement('div', { className: 'bg-white p-6 rounded-xl shadow' },
                            React.createElement('p', null, 'Configuraciones del sistema Monte Carlo')
                        )
                    )
                )
            );
        }
        
        ReactDOM.render(React.createElement(App), document.getElementById('root'));
    </script>
</body>
</html>